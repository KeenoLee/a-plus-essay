# Visualize on https://erd.surge.sh
# or https://quick-erd.surge.sh
#
# Relationship Types
#  -    - one to one
#  -<   - one to many
#  >-   - many to one
#  >-<  - many to many
#  -0   - one to zero or one
#  0-   - zero or one to one
#  0-0  - zero or one to zero or one
#  -0<  - one to zero or many
#  >0-  - zero or many to one
#
////////////////////////////////////


tutor
-----
id integer PK FK >- user.id
is_verified boolean
transcript varchar(127)
student_card varchar(127)
phone_number integer unique
is_whatsapp boolean
is_signal boolean
school varchar(127) NULL
major_id integer FK -> major.id
rating decimal(1,2) NULL
self_intro text NULL
ongoing_order_amount integer
completed_order_amount integer


preferred_subject
-----------------
id integer PK
tutor_id integer FK >- tutor.id
subject_id integer FK >- subject.id


major
-----
id integer PK
major varchar(127)


subject
-------
id integer PK
subject_name varchar(127)


orders_subject
--------------
id integer PK
order_id integer FK >- order.id
subject_id integer FK >- subject.id


transcript_subject
------------------
id integer PK
tutor_id integer FK >- tutor.id
subject_id integer FK >- subject.id
grade varchar(20)


user
----
id integer PK
is_admin boolean
is_tutor boolean
nickname varchar(31)
email varchar(127) unique
hashed_password varchar(60) NULL


comment
-------
id integer PK
student_id integer FK >- user.id
tutor_id integer FK >- tutor.id
comment text


sample
------
id integer PK
sample text
tutor_id integer FK >- tutor.id


chat_message
------------
id integer PK
order_id integer FK - order.id
sent_by_tutor boolean
message text
filename varchar(127) NULL


order
-----
id integer PK
student_id integer FK - user.id
tutor_id integer NULL FK - user.id
matched_time timestamp NULL
title varchar(63)
description text
required_note text NULL
budget integer
completed_time timestamp NULL
paid_time timestamp NULL
tutor_submission_deadline date
student_submission_deadline date


candidate
---------
id integer PK
order_id integer FK >- order.id
tutor_id integer FK >- tutor.id
charge integer
accept_time timestamp NULL
reject_time timestamp NULL
expire_time timestamp
