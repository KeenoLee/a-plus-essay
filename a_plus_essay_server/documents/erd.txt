# Visualize on https://erd.surge.sh
# or https://quick-erd.surge.sh
#
# Relationship Types
# - - one to one
# -< - one to many
# >- - many to one
# >-< - many to many
# -0 - one to zero or one
# 0- - zero or one to one
# 0-0 - zero or one to zero or one
# -0< - one to zero or many
# >0- - zero or many to one
#
////////////////////////////////////


tutor
-----
id integer PK FK - user.id
is_verified boolean
student_card varchar(127) null
phone_number integer unique
major_id integer FK >0- major.id
rating decimal(1,2) NULL
self_intro text NULL
ongoing_order_amount integer
completed_order_amount integer


school
------
id integer pk
tutor_id   integer fk >- tutor.id
school   varchar(127)


transcript
-----
id   integer pk
tutor_id   integer   fk >- tutor.id
transcript   varchar(127)



preferred_subject
-----------------
id integer PK
tutor_id integer FK >- tutor.id
subject_id integer FK >- subject.id


major
-----
id integer PK
major varchar(127)


subject
-------
id integer PK
subject_name varchar(127)


order_subject
--------------
id integer PK
order_id integer FK >0- order.id
subject_id integer FK >0- subject.id


transcript_subject
------------------
id integer PK
tutor_id integer FK >- tutor.id
subject_id integer FK >- subject.id
grade varchar(20)


user
----
id integer PK
is_admin boolean
is_tutor boolean
nickname varchar(31)
email varchar(127) unique
hashed_password varchar(60) NULL


comment
-------
id integer PK
student_id integer FK >0- user.id
tutor_id integer FK >0- tutor.id
comment text


sample
------
id integer PK
sample text
tutor_id integer FK >0- tutor.id


chat_message
------------
id integer PK
order_id integer FK >0- order.id
sent_by_tutor boolean
message text
filename varchar(127) NULL


order
-----
id integer PK
student_id integer FK >0- user.id
tutor_id integer NULL FK >0- user.id
title varchar(63)
grade   integer
description text
guideline   varchar(127) null
note   varchar(127) null
budget integer
matched_time timestamp NULL
completed_time timestamp NULL
paid_time timestamp NULL
tutor_submission_deadline date
student_submission_deadline date
created_at   timestamp


candidate
---------
id integer PK
order_id integer FK >0- order.id
tutor_id integer FK >0- tutor.id
charge integer
accept_time timestamp NULL
reject_time timestamp NULL
expire_time timestamp
